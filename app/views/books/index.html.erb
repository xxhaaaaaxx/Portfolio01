<h1>書籍一覧</h1>
<p>登録された書籍一覧を表示しています。書籍名から詳細が確認できます。</p>

<%= link_to '>>> 書籍新規登録', new_book_path %>

<table>

    <thead>
        <tr>
        <th><%= Book.human_attribute_name(:ndc) %></th>
        <th><%= Book.human_attribute_name(:name) %></th>
        <th><%= Book.human_attribute_name(:auther) %></th>
        <th><%= Book.human_attribute_name(:publisher) %></th>
        <th><%= Book.human_attribute_name(:published) %></th>
        <th><%= Book.human_attribute_name(:reviewrd_user) %></th>
        <th><%= Book.human_attribute_name(:notes) %></th>
        <th><%= Book.human_attribute_name(:book_comments) %></th>
        </tr>
    </thead>

    <tbody>
        <% @books.each do|book| %>

            <tr style="background-color:<%= cycle('#FFFFFF', '#ffffe0') %>">
                <td><%= book.ndc %></td>
                <td><%= link_to book.name, book %></td>
                <td><%= book.auther %></td>
                <td><%= book.publisher %></td>
                <td><%= book.published %></td>
                <td><%= book.user.name %></td>
                <td><%= truncate(book.notes, length: 30) %></td>
                <td><%= book.book_comments.count %></td>

                <% if book.user == @current_user %>
                    <td><%= link_to '編集', edit_book_path(book) %></td>
                    <td><%= link_to '削除', book, method: :delete, data: {confirm: "削除しますか？"}  %></td>
                <% else %>
                    <td></td>
                    <td></td>
                <% end %>

            </tr>
        <% end %>
        
    </tbody>

</table>

